<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Konsultasi AI - H+Medical</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<canvas id="bg"></canvas>

<div class="hero">
  <h1>Konsultasi AI</h1>
  <p>Masukkan keluhan pasien</p>

  <textarea id="keluhan" placeholder="Contoh: demam, diare, sesak napas, maag, luka..."></textarea>

  <button onclick="analisa()">Analisa</button>

  <div id="loading" class="loading">
    ğŸ¤– AI sedang menganalisa keluhan Anda...
  </div>

  <div id="hasil"></div>

  <p class="disclaimer">
    âš ï¸ Informasi ini hanya untuk edukasi dan pertolongan awal.
    Tidak menggantikan diagnosis atau tindakan dokter.
  </p>

  <!-- DARURAT -->
  <a href="tel:119" id="daruratBtn" class="darurat fullscreen" style="display:none">
    ğŸš¨ HUBUNGI DARURAT 119
  </a>

  <a href="index.html" class="outline">Kembali</a>
</div>

<script>
function analisa() {
  const loading = document.getElementById("loading");
  const hasil = document.getElementById("hasil");
  const darurat = document.getElementById("daruratBtn");
  const k = document.getElementById("keluhan").value.toLowerCase();

  hasil.innerHTML = "";
  darurat.style.display = "none";
  loading.style.display = "block";

  setTimeout(() => {
    let h = "";

    /* ğŸ”´ LEVEL 3 DARURAT */
    if (
      k.includes("sesak") ||
      k.includes("asma berat") ||
      k.includes("nyeri dada") ||
      k.includes("pingsan")
    ) {
      h = `
      <h3>ğŸ”´ LEVEL 3 â€“ DARURAT</h3>
      <b>ğŸ†˜ Pertolongan Pertama:</b>
      <ul>
        <li>Posisikan setengah duduk</li>
        <li>Longgarkan pakaian</li>
        <li>Jangan beri makan/minum</li>
      </ul>
      <b>â›” Larangan:</b> Jangan ditinggal sendirian
      `;
      darurat.style.display = "block";
    }

    /* ğŸŸ  LEVEL 2 */
    else if (k.includes("diare")) {
      h = `
      <h3>ğŸŸ  LEVEL 2 â€“ DIARE</h3>
      <b>ğŸ’Š Obat:</b> Oralit, Zinc<br>
      <b>ğŸŒ¿ Herbal:</b> Daun jambu biji<br>
      <b>ğŸ  Rumah:</b> Minum sering, makan lunak<br>
      <b>â›” Larangan:</b> Pedas & berminyak<br>
      <b>â±ï¸ Ke dokter:</b> >2 hari / dehidrasi
      `;
    }

    else if (k.includes("maag") || k.includes("asam lambung")) {
      h = `
      <h3>ğŸŸ  LEVEL 2 â€“ ASAM LAMBUNG</h3>
      <b>ğŸ’Š Obat:</b> Antasida<br>
      <b>ğŸŒ¿ Herbal:</b> Pisang, air hangat<br>
      <b>ğŸ  Rumah:</b> Makan teratur<br>
      <b>â›” Larangan:</b> Kopi & pedas<br>
      <b>â±ï¸ Ke dokter:</b> Nyeri hebat
      `;
    }

    /* ğŸŸ¢ LEVEL 1 */
    else if (k.includes("demam") || k.includes("flu") || k.includes("batuk")) {
      h = `
      <h3>ğŸŸ¢ LEVEL 1 â€“ DEMAM / FLU</h3>
      <b>ğŸ’Š Obat:</b> Paracetamol<br>
      <b>ğŸŒ¿ Herbal:</b> Jahe, madu<br>
      <b>ğŸ  Rumah:</b> Istirahat, minum hangat<br>
      <b>â›” Larangan:</b> Begadang<br>
      <b>â±ï¸ Ke dokter:</b> >3 hari
      `;
    }

    else if (k.includes("luka")) {
      h = `
      <h3>ğŸŸ¢ LEVEL 1 â€“ LUKA RINGAN</h3>
      <b>ğŸ’Š Obat:</b> Antiseptik<br>
      <b>ğŸŒ¿ Herbal:</b> Air bersih<br>
      <b>ğŸ  Rumah:</b> Bersihkan & tutup kasa<br>
      <b>â›” Larangan:</b> Jangan kotor<br>
      <b>â±ï¸ Ke dokter:</b> Luka dalam
      `;
    }

    else {
      h = `<p>âš ï¸ Keluhan belum dikenali. Coba jelaskan lebih detail.</p>`;
    }

    /* ğŸ’¾ TAHAP 3 â€“ SIMPAN RIWAYAT */
    let riwayat = JSON.parse(localStorage.getItem("riwayat")) || [];
    riwayat.unshift({
      keluhan: k,
      hasil: h,
      waktu: new Date().toLocaleString()
    });
    localStorage.setItem("riwayat", JSON.stringify(riwayat));

    loading.style.display = "none";
    hasil.innerHTML = h;

  }, 1200);
}
</script>

</body>
</html>
